<div class="container" style="margin-top: 15px">
  <%= form_for(@user, url: u_create_path) do |f| %>
    <%= render 'shared/error_messages', object: f.object %>

    <div class="form-group" id="nickname">
      <b><%= f.label :nickname, value="ニックネーム" %></b>
      <%= f.text_field :nickname, class: 'form-control', placeholder: "アプリに表示される名前です" %>
      <!--<p class="popup">アプリに表示されるユーザーネームです</p>-->
    </div>
    
    <div class="form-group">
      <b><label>年代</label></b><br>
      <label><%= f.radio_button :age, "10歳代" %>10歳代</label>
      <label><%= f.radio_button :age, "20歳代" %>20歳代</label>
      <label><%= f.radio_button :age, "30歳代" %>30歳代</label>
      <label><%= f.radio_button :age, "40歳代" %>40歳代</label>
      <label><%= f.radio_button :age, "50歳代" %>50歳代</label>
      <label><%= f.radio_button :age, "60歳代" %>60歳代</label>
      <label><%= f.radio_button :age, "70歳代" %>70歳代</label>
      <label><%= f.radio_button :age, "80歳代" %>80歳代</label>
      <label><%= f.radio_button :age, "90歳代" %>90歳代</label>
    </div>
    
    <div class="form-group">
      <b><label>性別</label></b>
      <br>
      <label><%= f.radio_button :sex, "男性" %>男性</label>
      <label><%= f.radio_button :sex, "女性" %>女性</label>
    </div>
    
    <div class="form-group" id="address">
      <b><label>居住エリア（郵便番号から検索）</label></b>
      <br>
      <input type="text" id="postcode" maxlength="8" placeholder="例:0000000 「-」不要">
      <button id="btn">入力</button>
      <br>
      <div class="balloon1-top" style="width:200px;">
      <p>住所が自動入力されます</p>
      </div>
    </div>
    
    <div class="form-group hide open">
      <b><%= f.label :prefucture, value="住所（都道府県）" %></b>
      <%= f.text_field :prefucture, id: 'pref', class: 'form-control', placeholder: '郵便番号から自動入力' %>
    </div>
    
    <div class="form-group hide open">
      <b><%= f.label :city, value="住所（市区町村）" %></b>
      <%= f.text_field :city, id: 'city', class: 'form-control', placeholder: '郵便番号から自動入力' %>
    </div>
    
    <div class="form-group">
      <b><label>分類</label></b><br>
      <label><%= f.radio_button :classification, "介護者" %>介護者</label>
      <label><%= f.radio_button :classification, "被介護者" %>被介護者</label>
      <label><%= f.radio_button :classification, "医療職" %>医療職</label>
    </div>
    
    <div class="form-group">
      <b><label>介護の対象</label></b><br>
      <label><%= f.radio_button :nursing, "実父" %>実父</label>
      <label><%= f.radio_button :nursing, "実母" %>実母</label>
      <label><%= f.radio_button :nursing, "義父" %>義父</label>
      <label><%= f.radio_button :nursing, "義母" %>義母</label>
      <label><%= f.radio_button :nursing, "祖父" %>祖父</label>
      <label><%= f.radio_button :nursing, "祖母" %>祖母</label>
      <label><%= f.radio_button :nursing, "兄弟姉妹" %>兄弟姉妹</label>
      <label><%= f.radio_button :nursing, "親戚" %>親戚</label>
      <label><%= f.radio_button :nursing, "その他" %>その他</label>
      <label><%= f.radio_button :nursing, "なし" %>なし</label>
    </div>
    
    <div class="form-group">
      <b><%= f.label :status, value="現状（プロフィール）" %></b>
      <%= f.text_area :status, class: 'form-control', rows: "5" %>
    </div>
    
    <div id="key_word">
      <div class="form-group">
        <b><%= f.label :key_word1, value="情報交換したい項目１" %></b>
        <%= f.text_field :key_word1, class: 'form-control', placeholder: "例：認知症" %>
      </div>
      
      <div class="form-group">
        <b><%= f.label :key_word2, value="情報交換したい項目２" %></b>
        <%= f.text_field :key_word2, class: 'form-control', placeholder: "例：介護疲れ" %>
      </div>
      
      <div class="form-group">
        <b><%= f.label :key_word3, value="情報交換したい項目３" %></b>
        <%= f.text_field :key_word3, class: 'form-control', placeholder: "例：難病" %>
      </div>
      
      <div class="balloon1-top">
        <p>
        あなたが情報交換したい内容を記載してください。
        <br>
        情報交換をしやすくする検索ワードです。
        <br>
        項目1は必ず入力してください
        </p>
      </div>
    </div>
  
    <div class="form-group" id="answer">
      <b><%= f.label :answer_digest, value="好きな食べ物" %></b>
      <%= f.text_field :answer_digest, class: 'form-control', placeholder: "※ログインに必要な質問の答え " %>
      <div class="balloon1-top">
        <p>ログイン時の質問の答えは漢字やカタカナ、
        半角文字など上記の記載に完全に一致するようにしてください。</p>
      </div>
    </div>
    
    <b><%= f.label :profile_image, value="プロフィール画像"%></b>
    <br>
    <%= f.file_field :profile_image, accept: 'image/jpeg,image/gif,image/png' %>
    
    <!--<%= f.file_field :profile_image, value: 'icon.png', class: 'hide', accept: 'image/jpeg,image/gif,image/png' %>-->
    <br>
    <br>
    
    <div style="text-align:center;" id="sign">
      <%= f.submit "新規登録", class: "btn1" %>
      <div class="balloon1-top">
        <p>登録内容はいつでもメニューの登録情報の更新から変更できます。</p>
      </div>
    </div>
    
  <% end %>
</div>

<script>

$(function(){
  $('#btn').on('click', () => {
    event.preventDefault();
    $('.open').fadeIn();
    $.ajax({
      url: "https://zipcloud.ibsnet.co.jp/api/search?zipcode=" + $('#postcode').val(),
      dataType: 'jsonp',
    }).done((data) => {
      if (data.results) { 
        getData(data.results[0]);
      } else {
        alert('該当データが見つかりません');
      }
    }).fail((data) => {
      alert('通信に失敗しました');
    });
  });

  function getData(data) {
    $('#pref').val(data.address1);
    $('#city').val(data.address2);
  }
});

$("#address").each(function() {
  $(this).hover(
      function() {
          $(this).children(".balloon1-top").fadeIn();
      },
      function() {
          $(this).children(".balloon1-top").fadeOut();
      }
  );
});

$("#key_word").each(function() {
  $(this).hover(
      function() {
          $(this).children(".balloon1-top").fadeIn();
      },
      function() {
          $(this).children(".balloon1-top").fadeOut();
      }
  );
});

$("#answer").each(function() {
  $(this).hover(
      function() {
          $(this).children(".balloon1-top").fadeIn();
      },
      function() {
          $(this).children(".balloon1-top").fadeOut();
      }
  );
});

$("#sign").each(function() {
  $(this).hover(
      function() {
          $(this).children(".balloon1-top").fadeIn();
      },
      function() {
          $(this).children(".balloon1-top").fadeOut();
      }
  );
});

</script>